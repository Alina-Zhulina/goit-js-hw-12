{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function getGallery(query, page) {\n    const API_KEY = '44394014-4230f595acf8cb42e98735a97';\n    const BASE_URL = 'https://pixabay.com';\n    const END_POINT = '/api/'; \n    const params = new URLSearchParams({\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: 15,\n        page: page\n    });\n    const url = `${BASE_URL}${END_POINT}`;\n    try {\n        const response = await axios.get(url, { params });\n        if (response.status !== 200) {\n            throw new Error('Failed to fetch images');\n        }\n        const data = response.data;\n        return  { hits: data.hits, totalHits: data.totalHits };\n    } catch(error) {\n    console.error('Error fetching the images:', error);\n         throw error;\n}\n}\n\n\n\n","\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nlet lightbox;\n\nexport function clearGallery() {\n    const gallery = document.querySelector('.gallery');\n    gallery.innerHTML = '';\n}\n\nexport function renderImages(images) {\n    const gallery = document.querySelector('.gallery');\n    const listContainer = document.createElement('ul');\n    listContainer.classList.add('photo-list');\n\n    const markup = images.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => {\n        return `\n            <li class=\"photo-card\">\n                <a href=\"${largeImageURL}\" class=\"gallery-link\">\n                    <img src=\"${webformatURL}\" alt=\"${tags}\" />\n                </a>\n                <ul class=\"info\">\n                <li><p><b>Downloads:</b></p> \n                    <p>${downloads}</p>\n                    </li>\n                    <li><p><b>Likes:</b></p> \n                    <p>${likes}</p>\n                    </li>\n                    <li><p><b>Views:</b></p> \n                    <p>${views}</p>\n                    </li>\n                    <li><p><b>Comments:</b></p> \n                    <p>${comments}</p>\n                    </li>\n                    \n                </ul>\n            </li>\n        `;\n    }).join('');\n\n    listContainer.innerHTML = markup;\n    gallery.appendChild(listContainer);\n\n    if (lightbox) {\n        lightbox.destroy();\n    }\n    lightbox = new SimpleLightbox('.gallery a');\n    lightbox.refresh();\n}\n\nexport function showNotification(message) {\n    iziToast.error({\n        title: 'Error',\n        message: message,\n        backgroundColor: '#ef4040',\n        theme: 'dark',\n    });\n}\n\nexport function showLoadBtn() {\n    const loadMoreButton = document.querySelector('.load-more-btn');\n    loadMoreButton.style.display = 'block';\n}\n\nexport function hideLoadBtn() {\n    const loadMoreButton = document.querySelector('.load-more-btn');\n    loadMoreButton.style.display = 'none';\n}\n\nexport function updateBtnStatus(page, maxPage) {\n    const loadMoreButton = document.querySelector('.load-more-btn');\n    if (page >= maxPage) {\n        hideLoadBtn();\n        showNotification(\"We're sorry, but you've reached the end of search results.\");\n    } else {\n        showLoadBtn();\n    }\n}\n","\nimport { getGallery } from './js/pixabay-api.js';\nimport { clearGallery, renderImages, showNotification, showLoadBtn, hideLoadBtn, updateBtnStatus } from './js/render-functions.js';\n\nconst form = document.querySelector('.search-form');\nconst loader = document.querySelector('.loader');\nconst input = form.querySelector('input[name=\"query\"]');\nconst loadMoreButton = document.querySelector('.load-more-btn');\nconst divList = document.querySelector('.gallery'); \nlet query = '';\nlet page = 1;\nlet maxPage = 1;\nconst perPage = 15;\nlet images = [];\n\nform.addEventListener('submit', async (e) => {\n    e.preventDefault(); \n    query = e.target.elements.query.value.trim();\n\n    if (query === '') {\n        hideLoadBtn();\n        showNotification(\"Please enter a search query.\");\n        return;\n    }\n    loader.style.display = 'block';\n    hideLoadBtn();\n    clearGallery();\n    page = 1;\n    try {\n        await fetchAndRenderImages();\n        input.value = '';\n    } catch (error) {\n        loader.style.display = 'none';\n        showNotification(error.message);\n    }\n});\n\nloadMoreButton.addEventListener('click', async () => {\n    try {\n        page++; \n        await fetchAndRenderImages();\n        scrollElements();\n    } catch (error) {\n        showNotification(error.message);\n    }\n});\n\nasync function fetchAndRenderImages() {\n    const data = await getGallery(query, page);\n    images = data.hits;\n    maxPage = Math.ceil(data.totalHits / perPage);\n    loader.style.display = 'none';\n\n    if (images.length === 0) {\n        showNotification(\"Sorry, there are no images matching your search query. Please try again!\");\n    } else {\n        renderImages(images);\n        updateBtnStatus(page, maxPage);\n    }\n}\n\nfunction scrollElements() {\n    const firstCard = divList.querySelector('li.photo-card');\n    if (firstCard) {\n        const cardHeight = firstCard.getBoundingClientRect().height;\n        window.scrollBy({\n            top: cardHeight * 2,\n            behavior: 'smooth',\n        });\n    }\n}\n"],"names":["getGallery","query","page","API_KEY","BASE_URL","END_POINT","params","url","response","axios","data","error","lightbox","clearGallery","gallery","renderImages","images","listContainer","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","showNotification","message","iziToast","showLoadBtn","loadMoreButton","hideLoadBtn","updateBtnStatus","maxPage","form","loader","input","divList","perPage","fetchAndRenderImages","scrollElements","firstCard","cardHeight"],"mappings":"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"}